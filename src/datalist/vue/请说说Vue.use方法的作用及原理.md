# 3. 请说说Vue.use方法的作用及原理

### 3.1. Vue 插件的规范

一个 Vue 插件通常是一个对象，这个对象需要包含一个 `install` 方法。该 `install` 方法会在调用 `Vue.use()` 时被执行。此外，插件也可以直接是一个函数，在这种情况下，这个函数会被当作 `install` 方法来执行。

### 3.2. `Vue.use()` 的执行流程

**检查插件是否已安装**

`Vue.use()` 首先会检查要安装的插件是否已经在 `Vue._installedPlugins` 数组中。`Vue._installedPlugins` 是 Vue 内部用于记录已安装插件的数组。如果插件已在该数组中，说明插件已经安装过，`Vue.use()` 直接返回，不再重复安装。

**处理参数**

1. `Vue.use()` 可以接受一个插件（对象或函数）作为参数，也可以接受多个参数，第一个参数为插件，其余参数会被传递给插件的 `install` 方法。
1. 如果传递给 `Vue.use()` 的第一个参数不是对象且不是函数，`Vue.use()` 会抛出一个错误，提示插件必须是一个对象****

**调用** `install` **方法**

1. 如果插件是一个对象，`Vue.use()` 会调用该对象的 `install` 方法，并将 `Vue` 构造函数作为第一个参数传递进去，如果 `Vue.use()` 有额外的参数，这些参数会紧接着 `Vue` 之后传递给 `install` 方法。
1. 如果插件本身就是一个函数，`Vue.use()` 会直接调用这个函数，并同样将 `Vue` 构造函数作为第一个参数传递，额外参数依次往后传递。
